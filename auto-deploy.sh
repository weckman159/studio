#!/bin/bash
# ะะฒัะพะผะฐัะธัะตัะบะธะน ะดะตะฟะปะพะน Firebase

echo "๐ ะะฐะฟััะบ ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ะดะตะฟะปะพั AutoSphere..."

# ะะตัะตัะพะด ะฒ ะดะธัะตะบัะพัะธั ะฟัะพะตะบัะฐ
cd ~/studio || exit 1

# ะัะพะฒะตัะบะฐ ะธะทะผะตะฝะตะฝะธะน
if [ -n "$(git status --porcelain)" ]; then
  echo "๐ฆ ะะฐะนะดะตะฝั ะธะทะผะตะฝะตะฝะธั, ะฝะฐัะธะฝะฐั ะดะตะฟะปะพะน..."
  
  # Firebase deploy ะฑะตะท ะฟะพะดัะฒะตัะถะดะตะฝะธะน
  firebase deploy --only hosting --force --non-interactive
  
  if [ $? -eq 0 ]; then
    echo "โ ะะตะฟะปะพะน ััะฟะตัะฝะพ ะทะฐะฒะตัััะฝ: $(date)"
  else
    echo "โ ะัะธะฑะบะฐ ะดะตะฟะปะพั: $(date)" >&2
  fi
else
  echo "๐ ะะทะผะตะฝะตะฝะธะน ะฝะตั, ะดะตะฟะปะพะน ะฝะต ััะตะฑัะตััั"
fi
